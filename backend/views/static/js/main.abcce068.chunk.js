(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{94:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(38),r=a.n(s),i=a(5),l=a(6),o=a.n(l),d=a(12),j=a(4),u=a(9),b=a(2),m=(a(49),a(50),a(15)),h=a(16),O=a(39),v=a.n(O).a.create({baseURL:"http://localhost:3001/api/",headers:{"Content-type":"application/json"}}),f=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"getAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return v.get("restaurants?page=".concat(e))}},{key:"get",value:function(e){return v.get("/restaurant?id=".concat(e))}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return v.get("restaurants?".concat(t,"=").concat(e,"&page=").concat(a))}},{key:"createReview",value:function(e){return v.post("/review-new",e)}},{key:"updateReview",value:function(e){return v.put("/review-edit",e)}},{key:"deleteReview",value:function(e,t){return v.delete("/review-delete?id=".concat(e),{data:{user_id:t}})}},{key:"getCuisines",value:function(e){return v.get("/cuisines")}}]),e}()),x=a(0),p=function(e){var t="",a=!1;e.location.state&&e.location.state.currentReview&&(a=!0,t=e.location.state.currentReview.text);var n=Object(c.useState)(t),s=Object(j.a)(n,2),r=s[0],i=s[1],l=Object(c.useState)(!1),o=Object(j.a)(l,2),d=o[0],b=o[1];return Object(x.jsx)("div",{children:e.user?Object(x.jsx)("div",{className:"submit-form",children:d?Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:"You submitted successfully!"}),Object(x.jsx)(u.b,{to:"/restaurants/"+e.match.params.id,className:"btn btn-success",children:"Back to Restaurant"})]}):Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("label",{htmlFor:"description",children:[a?"Edit":"Create"," Review"]}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"text",required:!0,value:r,onChange:function(e){i(e.target.value)},name:"text"})]}),Object(x.jsx)("button",{onClick:function(){var t={text:r,name:e.user.name,user_id:e.user.id,restaurant_id:e.match.params.id};a?(t.review_id=e.location.state.currentReview._id,f.updateReview(t).then((function(e){b(!0),console.log(e.data)})).catch((function(e){console.log(e)}))):f.createReview(t).then((function(e){b(!0),console.log(e.data)})).catch((function(e){console.log(e)}))},className:"btn btn-success",children:"Submit"})]})}):Object(x.jsx)("div",{children:"Please log in."})})},g=function(e){var t=Object(c.useState)({id:null,name:"",address:{},cuisine:"",reviews:[]}),a=Object(j.a)(t,2),n=a[0],s=a[1];Object(c.useEffect)((function(){var t;t=e.match.params.id,f.get(t).then((function(e){s(e.data),console.log(e.data)})).catch((function(e){console.log(e)}))}),[e.match.params.id]);return Object(x.jsx)("div",{children:n?Object(x.jsxs)("div",{children:[Object(x.jsx)("h5",{children:n.name}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Cuisine: "}),n.cuisine,Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"Address: "}),n.address.building," ",n.address.street,", ",n.address.zipcode]}),Object(x.jsx)(u.b,{to:"/restaurants/"+e.match.params.id+"/review",className:"btn btn-primary",children:"Add Review"}),Object(x.jsx)("h4",{children:" Reviews "}),Object(x.jsx)("div",{className:"row",children:n.reviews.length>0?n.reviews.map((function(t,a){return Object(x.jsx)("div",{className:"col-lg-4 pb-1",children:Object(x.jsx)("div",{className:"card",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("p",{className:"card-text",children:[t.text,Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"User: "}),t.name,Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"Date: "}),t.date]}),e.user&&e.user.id===t.user_id&&Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("a",{onClick:function(){return function(t,a){f.deleteReview(t,e.user.id).then((function(e){s((function(e){return e.reviews.splice(a,1),Object(i.a)({},e)}))})).catch((function(e){console.log(e)}))}(t._id,a)},className:"btn btn-primary col-lg-5 mx-1 mb-1",children:"Delete"}),Object(x.jsx)(u.b,{to:{pathname:"/restaurants/"+e.match.params.id+"/review",state:{currentReview:t}},className:"btn btn-primary col-lg-5 mx-1 mb-1",children:"Edit"})]})]})})},a)})):Object(x.jsx)("div",{className:"col-sm-4",children:Object(x.jsx)("p",{children:"No reviews yet."})})})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"No restaurant selected."})]})})},N=a(14),w=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"login",value:function(e){return v.post("/auth/login",e)}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e){return v.post("/auth/signup",e)}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}()),y=function(e){var t=Object(c.useState)({username:"",password:""}),a=Object(j.a)(t,2),n=a[0],s=a[1],r=function(e){var t=e.target,a=t.name,c=t.value;s(Object(i.a)(Object(i.a)({},n),{},Object(N.a)({},a,c)))},l=function(){var t=Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w.login(n).then((function(t){console.log(t.data),t.data.token&&(localStorage.setItem("user",JSON.stringify(t.data)),e.setUser(w.getCurrentUser())),e.history.push("/todopage")})).catch((function(e){console.log("LOGIN ERROR ===> ",e)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"card",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h4",{className:"card-title",children:"LOGIN"}),Object(x.jsx)("div",{className:"submit-form",children:Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("div",{class:"form-floating mb-3",children:[Object(x.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",required:!0,value:n.username,onChange:r,name:"username",placeholder:"Username"}),Object(x.jsx)("label",{for:"floatingInput",children:"Username"})]}),Object(x.jsxs)("div",{class:"form-floating",children:[Object(x.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",required:!0,value:n.password,onChange:r,name:"password",placeholder:"Password"}),Object(x.jsx)("label",{for:"floatingPassword",children:"Password"})]}),Object(x.jsxs)("div",{className:"container",style:{marginTop:"20px"},children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col"}),Object(x.jsx)("div",{className:"col col-md-auto",children:Object(x.jsx)("button",{onClick:l,className:"btn btn-success",children:"Login"})}),Object(x.jsx)("div",{className:"col"})]}),Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col"}),Object(x.jsx)("div",{className:"col col-md-auto",children:Object(x.jsxs)("small",{children:["No Account Yet?",Object(x.jsx)(u.b,{to:"/signup",className:"nav-link me-auto",children:Object(x.jsx)("span",{style:{color:"blue"},children:"Register here"})})]})}),Object(x.jsx)("div",{className:"col"})]})]})]})})]})})},k=function(e){var t=Object(c.useState)({username:"",email:"",password:""}),a=Object(j.a)(t,2),n=a[0],s=a[1],r=function(e){var t=e.target,a=t.name,c=t.value;s(Object(i.a)(Object(i.a)({},n),{},Object(N.a)({},a,c)))},l=function(){var t=Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w.register(n).then((function(t){console.log("USER REG ===>",t.data),t.data.token&&localStorage.setItem("user",JSON.stringify(t.data)),e.history.push("/todopage")})).catch((function(e){console.log("SIGNUP ERROR ===> ",e)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"card",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h4",{className:"card-title",children:"SIGN UP"}),Object(x.jsx)("div",{className:"submit-form",children:Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("div",{class:"form-floating mb-3",children:[Object(x.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",required:!0,value:n.username,onChange:r,name:"username",placeholder:"Username"}),Object(x.jsx)("label",{for:"floatingInput",children:"Username"})]}),Object(x.jsxs)("div",{class:"form-floating mb-3",children:[Object(x.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",required:!0,value:n.email,onChange:r,name:"email",placeholder:"E-Mail"}),Object(x.jsx)("label",{for:"floatingInput",children:"E-mail"})]}),Object(x.jsxs)("div",{class:"form-floating",children:[Object(x.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",required:!0,value:n.password,onChange:r,name:"password",placeholder:"Password"}),Object(x.jsx)("label",{for:"floatingPassword",children:"Password"})]}),Object(x.jsx)("div",{className:"container",style:{marginTop:"20px"},children:Object(x.jsxs)("div",{className:"row justify-content-md-center",children:[Object(x.jsx)("div",{className:"col-1"}),Object(x.jsx)("div",{className:"col-10 col-md-auto",children:Object(x.jsx)("button",{onClick:l,className:"btn btn-success",children:"Sign Up"})}),Object(x.jsx)("div",{className:"col-1"})]})})]})})]})})},R=a(43),T=a(42),S=function(e){var t=e.onAdd,a=Object(c.useState)(""),n=Object(j.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(""),l=Object(j.a)(i,2),o=l[0],d=l[1],u=Object(c.useState)(!1),b=Object(j.a)(u,2),m=b[0],h=b[1];return Object(x.jsx)("div",{className:"card",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("div",{className:"row justify-content-md-center",children:Object(x.jsx)("div",{className:"d-flex justify-content-center",children:Object(x.jsx)("h4",{className:"card-title ",children:"Add Task"})})}),Object(x.jsxs)("form",{className:"add-form",onSubmit:function(e){e.preventDefault(),s?(t({task_name:s,day_and_time:o,reminder:m}),r(""),d(""),h(!1)):alert("Please add a task")},children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{className:"form-label mt-4",children:"Task "}),Object(x.jsxs)("div",{className:"form-floating mb-3",children:[Object(x.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",required:!0,value:s,placeholder:"Add Task",onChange:function(e){return r(e.target.value)}}),Object(x.jsx)("label",{for:"floatingInput",children:"Add Task"})]}),Object(x.jsx)("label",{className:"form-label mt-4",children:"Day & Time "}),Object(x.jsxs)("div",{className:"form-floating mb-3",children:[Object(x.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",required:!0,value:o,placeholder:"Add Day & Time",onChange:function(e){return d(e.target.value)}}),Object(x.jsx)("label",{for:"floatingInput",children:"Add Day & Time"})]}),Object(x.jsx)("label",{className:"form-label mt-4",children:"Reminder "}),Object(x.jsx)("div",{className:"form-floating mb-3",children:Object(x.jsx)("input",{type:"checkbox",checked:m,value:m,onChange:function(e){return h(e.currentTarget.checked)}})})]}),Object(x.jsxs)("div",{className:"row justify-content-md-center",children:[Object(x.jsx)("div",{className:"col-3"}),Object(x.jsx)("div",{className:"col-3 d-flex justify-content-md-center",children:Object(x.jsx)("input",{type:"submit",value:"Save Task",className:"btn btn-success"})}),Object(x.jsx)("div",{className:"col-3"})]})]})]})})};function C(){var e=w.getCurrentUser();return e&&e.token?{"x-access-token":e.token}:{}}var E=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"getAll",value:function(){return v.get("/tasks",{headers:C()})}},{key:"get",value:function(e){return v.get("/restaurant?id=".concat(e))}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return v.get("restaurants?".concat(t,"=").concat(e,"&page=").concat(a))}},{key:"createTask",value:function(e){return v.post("/tasks",e,{headers:C()})}},{key:"updateReview",value:function(e){return v.put("/review-edit",e)}},{key:"deleteTask",value:function(e){return v.delete("/tasks/"+e)}}]),e}()),A=function(e){var t=Object(c.useState)(!1),a=Object(j.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)([]),i=Object(j.a)(r,2),l=i[0],u=i[1],b=n?"btn btn-danger":"btn btn-primary",m=n?"Close":"Add Task";Object(c.useEffect)((function(){E.getAll().then((function(e){console.log("TASKS LIST retrieved from BE ===> ",e.data),u(e.data)})).catch((function(e){console.log("GET ALL TASK ERROR ===> ",e)}))}),[]);var h=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.createTask(t).then((function(e){console.log(e.data),u([].concat(Object(R.a)(l),[e.data]))})).catch((function(e){console.log("CREATE TASK ERROR ===> ",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("Are you sure you want to delete?")&&E.deleteTask(t).then((function(e){200===e.status&&(u(l.filter((function(e){return e._id!==t}))),alert(e.data.message))})).catch((function(e){console.log("DELETE TASK ERROR ===> ",e),alert(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-9",children:Object(x.jsx)("header",{className:"header",children:Object(x.jsxs)("h2",{children:["This is based on \xa0",Object(x.jsx)("a",{href:"https://www.youtube.com/watch?v=w7ejDZ8SWv8",rel:"noreferrer",target:"_blank",children:"Traversy Media Tutorial"})]})})}),Object(x.jsx)("div",{className:"col-3",children:Object(x.jsx)("button",{style:{marginRight:"30px"},type:"button",onClick:function(){return s(!n)},className:b,children:m})})]}),Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"row",style:{marginTop:"25px"},children:n&&Object(x.jsx)(S,{onAdd:h})})}),Object(x.jsx)("div",{style:{marginTop:"30px"},children:l.length>0?l.map((function(e,t){return Object(x.jsx)("div",{className:"card text-white bg-dark mb-3",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-11",children:Object(x.jsxs)("h4",{className:"card-title",children:[e.task_name," "]})}),Object(x.jsx)("div",{className:"col-1 justify-content-end",children:Object(x.jsx)(T.a,{style:{cursor:"pointer"},onClick:function(){return O(e._id)}})})]}),Object(x.jsx)("p",{children:e.day_and_time})]})},e._id)})):"No tasks to show"})]})};var I=function(){var e=n.a.useState(w.getCurrentUser()),t=Object(j.a)(e,2),a=t[0],s=t[1];Object(c.useEffect)((function(){}),[]);var r=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(null),w.logout(),window.location.href="/login";case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark fixed-top",children:Object(x.jsxs)("div",{className:"container-fluid",children:[Object(x.jsx)("a",{className:"navbar-brand",href:"/todopage",children:"MERN STACK"}),Object(x.jsx)("button",{className:"navbar-toggler collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(x.jsx)("span",{className:"navbar-toggler-icon"})}),Object(x.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarColor01",children:[Object(x.jsxs)("ul",{className:"navbar-nav me-auto",children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/restaurants",className:"nav-link",children:"Restaurant Reviews"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/todopage",className:"nav-link",children:"To Do's"})})]}),Object(x.jsx)("div",{className:"d-flex",children:a?Object(x.jsxs)("a",{onClick:r,className:"nav-link me-auto",children:["LOGOUT ",a.name]}):Object(x.jsx)(u.b,{to:"/login",className:"nav-link me-auto",children:"LOGIN"})})]})]})}),Object(x.jsx)("div",{className:"container",style:{marginTop:"120px"},children:Object(x.jsxs)(b.c,{children:[Object(x.jsx)(b.a,{exact:!0,path:["/","/todopage"],component:A}),Object(x.jsx)(b.a,{path:"/restaurants/:id/review",render:function(e){return Object(x.jsx)(p,Object(i.a)(Object(i.a)({},e),{},{user:a}))}}),Object(x.jsx)(b.a,{path:"/restaurants/:id",render:function(e){return Object(x.jsx)(g,Object(i.a)(Object(i.a)({},e),{},{user:a}))}}),Object(x.jsx)(b.a,{path:"/todopage",render:function(e){return Object(x.jsx)(A,Object(i.a)({},e))}}),Object(x.jsx)(b.a,{path:"/login",render:function(e){return Object(x.jsx)(y,Object(i.a)(Object(i.a)({},e),{},{setUser:s}))}}),Object(x.jsx)(b.a,{path:"/signup",render:function(e){return Object(x.jsx)(k,Object(i.a)({},e))}})]})})]})};r.a.render(Object(x.jsx)(u.a,{children:Object(x.jsx)(I,{})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.abcce068.chunk.js.map